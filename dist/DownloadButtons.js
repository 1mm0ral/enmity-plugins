import*as a from"enmity/managers/plugins";let d=window.enmity.plugins.installPlugin,g=window.enmity.themer.installTheme;import h from"../../common/components/UpdateButton";import{getByProps as u}from"enmity/metro";import{React as e}from"enmity/metro/common";import{create as c}from"enmity/patcher";import{FormRow as f,ScrollView as w}from"enmity/components";import i from"../manifest.json";const l=c("download-buttons"),P=u("openLazy"),y={...i,patches:[],onStart(){l.before(P,"openLazy",({hideActionSheet:o},[s,p])=>{p==="LongPressUrl"&&s.then(m=>{l.after(m,"default",(S,U,t)=>{const r=t.props.children[1].props.children,n=t.props.children[0].props.title;r.unshift(e.createElement(f,{label:"Download Plugin/theme",onPress:()=>{n.endsWith("js")?d(n):n.endsWith("json")&&g(n),o()}})),t.props.children[1].props.children=r})})})},onStop(){},getSettingsPanel({settings:o}){return e.createElement(w,{settings:o},e.createElement(h,{pluginUrl:i.sourceUrl}))}};a.registerPlugin(y);
